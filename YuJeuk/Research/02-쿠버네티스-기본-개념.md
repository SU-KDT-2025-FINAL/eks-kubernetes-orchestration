# 쿠버네티스 기본 개념 이해

## 🤔 1.1 왜 쿠버네티스가 필요한가?

### 컨테이너의 한계점
- **단일 컨테이너 관리는 쉽지만, 수십~수백 개의 컨테이너는?**
  - Docker로 컨테이너 하나 실행하기: `docker run nginx`
  - 하지만 100개의 nginx 컨테이너를 관리한다면?

- **컨테이너가 죽으면 누가 다시 시작시킬까?**
  - 서버 장애나 애플리케이션 오류로 컨테이너가 종료되면?
  - 24시간 모니터링하면서 수동으로 재시작?

- **트래픽이 증가하면 컨테이너를 어떻게 늘릴까?**
  - 갑작스런 트래픽 증가 시 수동으로 컨테이너 추가?
  - 트래픽이 줄어들면 언제 컨테이너를 줄일까?

- **여러 서버에 분산된 컨테이너들을 어떻게 관리할까?**
  - 서버 A에는 웹서버, 서버 B에는 데이터베이스
  - 각각 다른 서버에 SSH 접속해서 관리?

### 쿠버네티스의 해답
- **자동 복구 (Self-healing)**: 컨테이너가 죽으면 자동으로 새로 시작
- **자동 확장 (Auto-scaling)**: 트래픽에 따라 컨테이너 수 자동 조절
- **로드 밸런싱**: 여러 컨테이너로 트래픽 분산
- **롤링 업데이트**: 서비스 중단 없이 업데이트

## 🧩 1.2 핵심 개념 익히기

### 개념의 흐름
```
컨테이너 → Pod → Deployment → Service → Ingress
```

### Pod (파드) - 쿠버네티스의 최소 단위
```yaml
# 간단한 Pod 예시
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: nginx
    image: nginx:1.20
    ports:
    - containerPort: 80
```

**Pod의 특징:**
- 쿠버네티스의 최소 배포 단위
- 하나 이상의 컨테이너를 포함 (보통은 1개)
- 같은 Pod 내 컨테이너들은 네트워크와 스토리지를 공유
- Pod는 고유한 IP 주소를 가짐

**실생활 비유:** Pod는 아파트 한 세대, 컨테이너는 그 안에 사는 사람들

### Deployment (디플로이먼트) - Pod의 관리자
```yaml
# Deployment 예시
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3  # Pod를 3개 유지
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.20
        ports:
        - containerPort: 80
```

**Deployment의 역할:**
- Pod의 복제본을 관리 (replicas: 3 → nginx Pod 3개 유지)
- 원하는 상태를 유지 (Desired State)
- Pod가 죽으면 자동으로 새로 생성
- 롤링 업데이트 지원 (무중단 배포)

**실생활 비유:** Deployment는 아파트 관리사무소, Pod들의 상태를 관리

### Service (서비스) - 네트워크 접근점
```yaml
# Service 예시
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx  # nginx 라벨을 가진 Pod들을 대상
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer
```

**Service의 역할:**
- Pod들에 대한 안정적인 네트워크 접근점
- 로드 밸런싱 제공 (트래픽을 여러 Pod에 분산)
- Pod IP가 변해도 일정한 접근 방법 제공
- DNS 이름으로 접근 가능

**실생활 비유:** Service는 아파트 대표 전화번호, 어느 세대로 연결될지는 자동으로 결정

## 🛠️ 1.3 실습 준비

### Docker Desktop에서 Kubernetes 활성화
1. Docker Desktop 실행
2. Settings → Kubernetes → Enable Kubernetes 체크
3. Apply & Restart

### kubectl 기본 명령어
```bash
# 클러스터 정보 확인
kubectl cluster-info

# 노드 확인
kubectl get nodes

# Pod 목록 확인
kubectl get pods

# 모든 리소스 확인
kubectl get all

# 특정 리소스 상세 정보
kubectl describe pod <pod-name>

# 로그 확인
kubectl logs <pod-name>
```

## 🎯 1단계 완료 체크리스트

### 이론 이해
- [ ] 컨테이너만으로는 해결하기 어려운 문제들을 설명할 수 있다
- [ ] Pod, Deployment, Service의 역할을 각각 설명할 수 있다
- [ ] 왜 Pod가 필요한지, 컨테이너와 어떻게 다른지 이해했다

### 실습 완료
- [ ] Docker Desktop에서 Kubernetes를 활성화했다
- [ ] kubectl 명령어로 클러스터 상태를 확인할 수 있다
- [ ] 간단한 Pod를 생성하고 확인할 수 있다

### 실습 예제
```bash
# 간단한 nginx Pod 생성
kubectl run my-nginx --image=nginx:1.20 --port=80

# Pod 상태 확인
kubectl get pods

# Pod 상세 정보 확인
kubectl describe pod my-nginx

# Pod 삭제
kubectl delete pod my-nginx
```

## 🤔 자주 묻는 질문

**Q: Pod 안에 여러 컨테이너를 넣는 경우는 언제인가요?**
A: 주로 메인 애플리케이션과 보조 역할을 하는 컨테이너를 함께 넣습니다. 예: 웹서버 + 로그 수집기

**Q: Deployment 없이 Pod만 사용하면 안 되나요?**
A: 가능하지만 권장하지 않습니다. Pod가 죽으면 자동으로 재생성되지 않아요.

**Q: Service 없이 Pod IP로 직접 접근하면 안 되나요?**
A: Pod IP는 Pod가 재생성될 때마다 바뀝니다. Service를 통해 안정적인 접근점을 제공해야 해요.

---

**다음 단계**: [03-쿠버네티스-아키텍처.md](./03-쿠버네티스-아키텍처.md)로 이동하여 쿠버네티스 내부 구조를 학습하세요.